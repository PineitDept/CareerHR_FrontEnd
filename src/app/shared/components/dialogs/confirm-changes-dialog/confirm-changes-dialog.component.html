<!-- confirm-changes-dialog.component.html -->
<div class="tw-text-black">
  <div class="tw-text-lg tw-font-semibold tw-px-6 tw-pt-4 tw-pb-3">
    {{ data.title || 'Confirm Changes' }}
  </div>

  <div class="tw-border-t tw-border-[#E3E3E3]"></div>

  <div class="tw-px-6 tw-py-4 tw-space-y-6 tw-max-h-[60vh] tw-overflow-y-auto">
    <ng-container *ngFor="let group of data.groups">
      <div class="tw-space-y-3">
        <div class="tw-text-base tw-font-semibold">{{ group.section }}</div>

        <div class="tw-overflow-auto tw-rounded-lg tw-border tw-border-gray-200">
          <table class="tw-w-full tw-text-sm tw-border-separate tw-border-spacing-0">
            <thead>
              <tr class="tw-bg-[#F0F3F5] tw-text-gray-700">
                <th class="tw-text-left tw-font-medium tw-px-3 tw-py-2">Item</th>
                <th class="tw-text-left tw-font-medium tw-px-3 tw-py-2">Field</th>
                <th class="tw-text-left tw-font-medium tw-px-3 tw-py-2">From</th>
                <th class="tw-text-left tw-font-medium tw-px-3 tw-py-2">To</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let it of group.items; let i = index"
                  [ngClass]="i % 2 === 0 ? 'tw-bg-white' : 'tw-bg-gray-50'">
                <td class="tw-px-3 tw-py-2 tw-whitespace-pre-wrap">{{ it.label }}</td>
                <td class="tw-px-3 tw-py-2">
                  <span class="tw-inline-block tw-rounded tw-bg-gray-100 tw-px-2 tw-py-0.5 tw-text-xs tw-font-medium tw-text-gray-700">
                    {{ prettyField(it.field) }}
                  </span>
                </td>
                <td class="tw-px-3 tw-py-2">
                  <span class="tw-inline-block tw-rounded tw-bg-red-50 tw-text-red-700 tw-px-2 tw-py-0.5 tw-text-xs tw-font-medium tw-ring-1 tw-ring-red-200">
                    {{ prettyValue(it.field, it.from) }}
                  </span>
                </td>
                <td class="tw-px-3 tw-py-2">
                  <span class="tw-inline-block tw-rounded tw-bg-emerald-50 tw-text-emerald-700 tw-px-2 tw-py-0.5 tw-text-xs tw-font-medium tw-ring-1 tw-ring-emerald-200">
                    {{ prettyValue(it.field, it.to) }}
                  </span>
                </td>
              </tr>
              <tr *ngIf="!group.items?.length">
                <td class="tw-text-center tw-text-gray-500 tw-px-3 tw-py-4" colspan="4">No changes in this section</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </ng-container>

    <p *ngIf="data.message" class="tw-text-sm tw-text-gray-600">
      {{ data.message }}
    </p>
  </div>

  <div class="tw-border-t tw-border-gray-300"></div>

  <div class="tw-text-right tw-px-6 tw-pt-3 tw-pb-3">
    <button
      *ngIf="data.confirm !== false"
      class="tw-bg-gray-200 hover:tw-bg-gray-300 tw-text-black tw-font-medium tw-py-1.5 tw-px-5 tw-rounded tw-mr-2"
      (click)="onCancel()"
    >
      Cancel
    </button>
    <button
      class="tw-text-white tw-font-medium tw-py-1.5 tw-px-6 tw-rounded tw-bg-[#00AA55] hover:tw-bg-[#02934a]"
      (click)="onConfirm()"
    >
      {{ data.confirm === false ? 'OK' : 'Confirm' }}
    </button>
  </div>
</div>
