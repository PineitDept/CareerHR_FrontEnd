<p *ngIf="label" class="tw-text-sm tw-font-bold tw-mb-2 text-black">
    {{ label }} <span *ngIf="require" class="text-red">*</span>
</p>

<!-- Trigger (เดิม) -->
<button *ngIf="!searchable" #trigger type="button" class="dd-trigger" [class.dd-disabled]="disabledSelected"
    [disabled]="disabledSelected" (click)="open(trigger)" (keydown)="onTriggerKeydown($event, trigger)">
    <span class="dd-text tw-text-left">{{ display }}</span>
    <svg class="dd-caret" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" />
    </svg>
</button>

<!-- Trigger (ค้นหา) -->
<div *ngIf="searchable" #trigger class="dd-trigger tw-flex tw-items-center tw-gap-2"
    [class.dd-disabled]="disabledSelected">

    <input #searchInput type="text" class="tw-flex-1 tw-bg-transparent tw-outline-none" [placeholder]="placeholder"
        [value]="searchTerm" autocomplete="off" (click)="onInputClick(trigger); $event.stopPropagation()"
        (focus)="onInputFocus()" (keydown)="onInputKeydown($event, trigger)" (input)="onSearchInput($event)">

    <button type="button" class="tw-flex tw-items-center tw-justify-center" aria-label="Open options"
        (click)="open(trigger)">
        <svg class="dd-caret" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" />
        </svg>
    </button>
</div>

<!-- Panel -->
<ng-template #panel>
    <div class="dd-panel cdk-dropdown-panel" role="listbox" [style.max-height.px]="panelMaxHeight" tabindex="0"
        (keydown)="onPanelKeydown($event)">
        <ul class="dd-menu">
            <li *ngFor="let i of filteredItems; let idx = index" class="dd-item"
                [attr.data-active]="activeIndex === idx ? 'true' : null" [class.dd-selected]="isEqual(i.value, value)"
                (mouseenter)="activeIndex = idx" (click)="selectAt(idx)">
                <span class="dd-label">{{ i.label }}</span>
                <svg *ngIf="isEqual(i.value, value)" class="dd-check" width="16" height="16" viewBox="0 0 24 24"
                    aria-hidden="true">
                    <path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="2" />
                </svg>
            </li>
            <li *ngIf="filteredItems.length === 0" class="tw-text-sm tw-text-gray-500 tw-px-3 tw-py-2">
                {{ noMatchText }}
            </li>
        </ul>
    </div>
</ng-template>